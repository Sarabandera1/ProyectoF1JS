<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="css/equipos.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro de Equipo</title>
</head>

<body class="background">
  <div class="card"> 
    <div class="card-header">
      <h2>Registro de Equipo</h2>
    </div>
    <form id="formCrearEquipo">
      <div class="codigo" style="display:none;">
        <label for="idEquipo" class="form-label">COD</label>
        <input type="number" class="form-control" id="idEquipo" name="idEquipo" placeholder="${idEquipo}" disabled>
      </div>
      <div class="form-grid">
        <div class="form-group">
          <label class="form-label" for="nombreEquipo">Nombre del equipo</label>
          <input type="text" class="form-control" id="nombreEquipo" name="nombreEquipo" placeholder="Ingrese el nombre del equipo" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="paisEquipo">Pa√≠s</label>
          <input type="text" class="form-control" id="paisEquipo" name="paisEquipo" placeholder="Ingrese el pa√≠s" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="motorEquipo">Motor</label>
          <input type="text" class="form-control" id="motorEquipo" name="motorEquipo" placeholder="Especifique el motor" required>
        </div>
        <div class="form-group">
          <label for="nombrePiloto1" class="form-label">Piloto Principal</label>
          <select class="nombrePilotoVeh form-control" name="nombrePiloto1" required>
            <option value="">Seleccionar Piloto</option>
          </select>
        </div>
        <div class="form-group">
          <label for="nombrePiloto2" class="form-label">Piloto Secundario</label>
          <select class="nombrePilotoVeh form-control" name="nombrePiloto2" required>
            <option value="">Seleccionar Piloto</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label" for="imagenEquipo">Imagen del Equipo</label>
          <div class="image-upload-container" id="dropZone">
            <i>üìÅ</i>
            <p class="image-upload-text">Arrastra una imagen aqu√≠ o haga clic para seleccionar</p>
            <input type="file" class="file-input" id="imagenEquipo" name="imagenEquipo" accept="image/*" required>
          </div>
          <div class="preview-container">
            <img class="preview-image" id="imagePreview" alt="Preview">
          </div>
        </div>
      </div>
      <button id="btnRegistrar" type="submit" class="btn-submit">Registrar Equipo</button>
      <div id="statusMessage" class="status-message"></div>
    </form>
  </div>
    </div>
    <div id="contenedorEquipos" class="contenedor-equipos">
      <!-- Las tarjetas de los equipos se generar√°n din√°micamente aqu√≠ -->
    </div>    
  </div>
  <script>
    // Obtener los elementos del formulario
    const form = document.getElementById('formCrearEquipo');
    const nombreEquipoInput = document.getElementById('nombreEquipo');
    const paisEquipoInput = document.getElementById('paisEquipo');
    const motorEquipoInput = document.getElementById('motorEquipo');
    const piloto1Select = document.querySelector('select[name="nombrePiloto1"]');
    const piloto2Select = document.querySelector('select[name="nombrePiloto2"]');
    const imagenEquipoInput = document.getElementById('imagenEquipo');
    const btnRegistrar = document.getElementById('btnRegistrar');
    const statusMessage = document.getElementById('statusMessage');
    
    // Funci√≥n para almacenar los datos del equipo en el localStorage
    function guardarEquipo(equipo) {
      let equipos = JSON.parse(localStorage.getItem('equipos')) || [];
      equipos.push(equipo);
      localStorage.setItem('equipos', JSON.stringify(equipos));
    }
    
    // Funci√≥n para cargar los datos y mostrar las tarjetas
    function mostrarEquipos() {
      const equipos = JSON.parse(localStorage.getItem('equipos')) || [];
      const contenedorEquipos = document.getElementById('contenedorEquipos');
      
      contenedorEquipos.innerHTML = '';
      
      equipos.forEach((equipo) => {
        const tarjeta = document.createElement('div');
        tarjeta.classList.add('equipo-card');
        tarjeta.innerHTML = `
          <h3>${equipo.nombreEquipo}</h3>
          <p><strong>Pa√≠s:</strong> ${equipo.paisEquipo}</p>
          <p><strong>Motor:</strong> ${equipo.motorEquipo}</p>
          <p><strong>Piloto Principal:</strong> ${equipo.piloto1}</p>
          <p><strong>Piloto Secundario:</strong> ${equipo.piloto2}</p>
          <img src="${equipo.imagenEquipo}" alt="${equipo.nombreEquipo}" class="equipo-image"/>
        `;
        contenedorEquipos.appendChild(tarjeta);
      });
    }
    
    // Funci√≥n que maneja la acci√≥n de registro del equipo
    form.addEventListener('submit', function (event) {
      event.preventDefault();  // Evita que el formulario se env√≠e normalmente
    
      const equipo = {
        nombreEquipo: nombreEquipoInput.value,
        paisEquipo: paisEquipoInput.value,
        motorEquipo: motorEquipoInput.value,
        piloto1: piloto1Select.value,
        piloto2: piloto2Select.value,
        imagenEquipo: URL.createObjectURL(imagenEquipoInput.files[0]),
      };
    
      // Guardar el equipo en el localStorage
      guardarEquipo(equipo);
    
      // Mostrar un mensaje de √©xito
      statusMessage.textContent = 'Equipo registrado con √©xito';
    
      // Limpiar los campos del formulario
      form.reset();
    
      // Mostrar las tarjetas con los equipos registrados
      mostrarEquipos();
    });
    
    // Mostrar los equipos registrados al cargar la p√°gina
    window.onload = mostrarEquipos;
    </script>
    
</body>

</html>